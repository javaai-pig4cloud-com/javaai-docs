---
title: 'å¿«é€Ÿå¼€å§‹'
---

<Card title="å†™åœ¨æœ€å‰ï¼šé—®é¢˜å’¨è¯¢è¯·ç›´æ¥ç‚¹å‡»æ­¤å¤„æäº¤ ISSUE" icon="star" href="https://github.com/pig-mesh/deepseek4j/issues">
- â­ï¸ **è¯·å…ˆ Star æœ¬é¡¹ç›®åå†æé—®ï¼Œä½œè€…ç²¾åŠ›æœ‰é™ï¼Œæœª Star ç›´æ¥ Close**
- ğŸ [GitHub ISSUE](https://github.com/pig-mesh/deepseek4j/issues) éœ€åŒ…å«ï¼šé—®é¢˜æˆªå›¾ + SDKç‰ˆæœ¬ + é…ç½®ä»£ç   
</Card>

## Maven ä¾èµ–

åœ¨ä½ çš„ `pom.xml` ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š [![Maven Central](https://img.shields.io/maven-central/v/io.github.pig-mesh.ai/deepseek4j.svg?style=flat-square)](https://maven.badges.herokuapp.com/maven-central/io.github.pig-mesh.ai/deepseek4j)

```xml
<dependency>
  <groupId>io.github.pig-mesh.ai</groupId>
  <artifactId>deepseek-spring-boot-starter</artifactId>
  <version>1.4.3</version>
</dependency>
```

## åŸºç¡€é…ç½®

åœ¨ `application.yml` æˆ– `application.properties` ä¸­æ·»åŠ å¿…è¦çš„é…ç½®ï¼š

```yaml
deepseek:
  api-key: your-api-key-here  # å¿…å¡«é¡¹ï¼šä½ çš„ API å¯†é’¥
  model: deepseek-reasoner
  base-url: https://api.deepseek.com  # å¯é€‰ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ API åœ°å€
```

## åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

### 1. æµå¼è¿”å›ç¤ºä¾‹

```java
@Autowired
private DeepSeekClient deepSeekClient;

@GetMapping(value = "/chat", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
public Flux<ChatCompletionResponse> chat(String prompt) {
    return deepSeekClient.chatFluxCompletion(prompt);
}
```

### 2. è¿›é˜¶é…ç½®ç¤ºä¾‹

- ChatCompletionRequest é…ç½®æ„é€ 

```java
@GetMapping(value = "/chat/advanced", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
public Flux<ChatCompletionResponse> chatAdvanced(String prompt) {
    ChatCompletionRequest request = ChatCompletionRequest.builder()
        // æ¨¡å‹é€‰æ‹©ï¼Œæ”¯æŒ DEEPSEEK_CHATã€DEEPSEEK_REASONER ç­‰
        .model(ChatCompletionModel.DEEPSEEK_REASONER)
        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        .addUserMessage(prompt)
        // è®¾ç½®æœ€å¤§ç”Ÿæˆ token æ•°ï¼Œé»˜è®¤ 2048
        .maxTokens(1000)
        // è®¾ç½®å“åº”æ ¼å¼ï¼Œæ”¯æŒ JSON ç»“æ„åŒ–è¾“å‡º
        .responseFormat(...) // å¯é€‰
        // function calling
        .tools(...) // å¯é€‰
        .build();
        
    return deepSeekClient.chatFluxCompletion(request);
}
```

- å¤šè½®ä¼šè¯

```java
	public final static HashMap<String, String> cache = new HashMap<>();

	@GetMapping(value = "/chat/advanced", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
	public Flux<ChatCompletionResponse> chatAdvanced(String prompt, String cacheCode) {
		log.info("cacheCode {}", cacheCode);

		ChatCompletionRequest request = ChatCompletionRequest.builder().model(deepSeekProperties.getModel())
				.addUserMessage(prompt)
        .addAssistantMessage(elt.apply(cache.getOrDefault(cacheCode, "")))
				.addSystemMessage("ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŠ©æ‰‹").maxCompletionTokens(5000).build();
		log.info("request {}", Json.toJson(request));
		// åªä¿ç•™ä¸Šä¸€æ¬¡å›ç­”å†…å®¹
		cache.remove(cacheCode);
		return deepSeekClient.chatFluxCompletion(request).doOnNext(i -> {
			String content = choicesProcess.apply(i.choices());
			// å…¶ä»–ELTæµç¨‹
			cache.merge(cacheCode, content, String::concat);
		}).doOnError(e -> log.error("/chat/advanced error:{}", e.getMessage()));
	}


	Function<List<ChatCompletionChoice>, String> choicesProcess = list -> list.stream().map(e -> e.delta().content())
			.collect(Collectors.joining());

	Function<String, String> elt = s -> s.replaceAll("<think>[\\s\\S]*?</think>", "").replaceAll("\n", "");

```

### 3. åŒæ­¥è¾“å‡º ï¼ˆéå®æ—¶å“åº”æµï¼‰

<Warning>ä¸æ¨èä½¿ç”¨åŒæ­¥é˜»å¡è°ƒç”¨æ–¹å¼ï¼ŒR1æ¨¡å‹æ¨ç†è€—æ—¶è¾ƒé•¿æ˜“å¯¼è‡´å®¢æˆ·ç«¯è¿æ¥è¶…æ—¶ï¼Œä¸”å“åº”å»¶è¿Ÿä¼šå½±å“ç”¨æˆ·ä½“éªŒ</Warning>

```java
@GetMapping(value = "/sync/chat")
public ChatCompletionResponse syncChat(String prompt) {
  ChatCompletionRequest request = ChatCompletionRequest.builder()
      // æ ¹æ®æ¸ é“æ¨¡å‹åç§°åŠ¨æ€ä¿®æ”¹è¿™ä¸ªå‚æ•°
      .model(deepSeekProperties.getModel())
      .addUserMessage(prompt).build();

  return deepSeekClient.chatCompletion(request).execute();
}
```

<Card title="PIG AIåº”ç”¨å¼€å‘å¹³å° | é€‚åˆä¸­å¤§å‹ä¼ä¸šæ„å»ºè‡ªä¸»å¯æ§çš„AIä¸­å°" icon="link" href="https://ai.pig4cloud.com">
**ä¸ºJavaå¼€å‘è€…æä¾›å…¨æ ˆå¼AIå·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆ**ï¼Œå¼ºç±»å‹/é«˜å¯ç»´æŠ¤æ€§æ¶æ„ï¼Œå†…ç½®30+ä¸»æµå¤§æ¨¡å‹æ”¯æŒã€‚

- **ğŸ” çŸ¥è¯†å¼•æ“ä½“ç³»**ï¼šRAG çŸ¥è¯†å¼•æ“å…¨è‡ªåŠ¨åŒ–å¤šæ¨¡æ€è§£å†³æ–¹æ¡ˆ
- **ğŸ“ AI-OCR ä¸­æ¢**ï¼šå¤æ‚éæ ‡åœºæ™¯é«˜ç²¾åº¦è¯†åˆ«
- **âš™ï¸ ä¸šåŠ¡æ™ºèƒ½èåˆ**ï¼šå‡½æ•°ç¼–æ’ + Chat2SQLï¼Œæ— ç¼å¯¹æ¥ç°æœ‰ä¸šåŠ¡ç³»ç»Ÿ
- **ğŸ›¡ï¸ Nç»´é£æ§ä½“ç³»**ï¼šæ•æ„Ÿè¯/IP/Token/User è§„åˆ™æ§åˆ¶å¼•æ“
</Card>

<Card title="æ–‡æ¡£æœ‰è¯¯ï¼Ÿè¯·ååŠ©ç¼–è¾‘" icon="pencil" href="https://github.com/javaai-pig4cloud-com/javaai-docs/edit/main/deepseek/quickstart.mdx">
  å‘ç°æ–‡æ¡£é—®é¢˜ï¼Ÿç‚¹å‡»æ­¤å¤„ç›´æ¥åœ¨ GitHub ä¸Šç¼–è¾‘å¹¶æäº¤ PRï¼Œå¸®åŠ©æˆ‘ä»¬æ”¹è¿›æ–‡æ¡£ï¼
</Card>

