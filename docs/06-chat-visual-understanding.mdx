---
title: Chat è§†è§‰ç†è§£
---

### ç¤ºä¾‹ä»£ç ï¼šåŸºäºDashscopeçš„LangChain4jè§†è§‰ç†è§£

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡Dashscopeçš„APIï¼Œç»“åˆLangChain4jè¿›è¡Œå›¾åƒç†è§£ã€‚ä½¿ç”¨çš„æ¨¡å‹æ˜¯`qwen-vl-max`ï¼Œå…¶æ”¯æŒè§†è§‰-è¯­è¨€çš„å¤šæ¨¡æ€ä»»åŠ¡ã€‚ 

> ä»éè§„åˆ™å›¾ç‰‡ä¸­è¯»å–æŒ‡å®šæ—¥æœŸçš„æŒ‡æ•°ç‚¹æ•°


<img src='https://minio.pigx.top/oss/202410/1728291870.png' alt='1728291870'/>

#### æ„å»ºå¤§æ¨¡å‹å®¢æˆ·ç«¯

```java
@Bean
public ChatModel chatModel() {
  return OpenAiChatModel.builder()
          .apiKey(System.getenv("DASHSCOPE_KEY"))
          .modelName("qwen-vl-max")  // è®¾ç½®ä½¿ç”¨çš„æ¨¡å‹åç§°
          .baseUrl("https://dashscope.aliyuncs.com/compatible-mode/v1")
          .build();
}
```


####  æ„å»º ImageContent

```java

/**
 * ä½œè€…: lengleng
 * è§†è§‰ç†è§£ç¤ºä¾‹ - é€šè¿‡Dashscopeè¿›è¡Œå›¾åƒåˆ†æ
 */
@SpringBootTest
class LLMConfigTest {
    @Autowired
    private ChatModel chatModel;

    @Value("1.png")
    private Resource resource;

    /**
     * æµ‹è¯•å¤šæ¨¡æ€å›¾åƒè¯†åˆ«åŠŸèƒ½
     * éªŒè¯ChatModelèƒ½å¦æ­£ç¡®åˆ†æå›¾ç‰‡å¹¶ä»ä¸­æå–ä¸Šè¯æŒ‡æ•°æ•°æ®
     */
    @Test
    void testImageRecognitionAndDataExtraction() throws IOException {
        byte[] byteArray = resource.getContentAsByteArray();
        String encodeToString = Base64.getEncoder().encodeToString(byteArray);

        UserMessage userMessage = UserMessage.from(TextContent.from("ä»ä»¥ä¸‹å›¾ç‰‡ä¸­è·å– 9.30å·çš„ä¸Šè¯æŒ‡æ•°"),
                ImageContent.from(encodeToString, "image/png"));

        ChatResponse response = chatModel.chat(userMessage);
        System.out.println(response.aiMessage().text());
    }
}
```

### è¯´æ˜ï¼š
1. **æ¨¡å‹é€‰æ‹©**ï¼š`qwen-vl-max` æ˜¯ä¸€ä¸ªå¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œæ”¯æŒå›¾ç‰‡å’Œæ–‡æœ¬çš„ç»“åˆè¾“å…¥ï¼Œé€‚ç”¨äºè§†è§‰-è¯­è¨€ä»»åŠ¡ã€‚
2. **å›¾ç‰‡ä¸Šä¼ **ï¼šé€šè¿‡`Base64`ç¼–ç å°†å›¾ç‰‡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç»“åˆ`ImageContent`å’Œ`TextContent`ä¸€èµ·å‘é€åˆ°æ¨¡å‹è¿›è¡Œå¤„ç†ã€‚
3. **APIè°ƒç”¨**ï¼šä½¿ç”¨`OpenAiChatModel`æ¥æ„å»ºè¯·æ±‚ï¼Œå¹¶é€šè¿‡`chat()`æ–¹æ³•è°ƒç”¨æ¨¡å‹ã€‚è¯·æ±‚å†…å®¹åŒ…æ‹¬æ–‡æœ¬æç¤ºå’Œå›¾ç‰‡ï¼Œæ¨¡å‹ä¼šæ ¹æ®è¾“å…¥è¿”å›åˆ†æç»“æœã€‚
4. **è§£æä¸è¾“å‡º**ï¼šä»`ChatResponse`ä¸­è·å–AIçš„å›å¤ï¼Œæ‰“å°å‡ºå¤„ç†åçš„ç»“æœã€‚

### åº”ç”¨åœºæ™¯ï¼š
+ **å›¾åƒæ–‡å­—æå–**ï¼šå¦‚å‘ç¥¨ä¿¡æ¯çš„æå–ã€è¡¨å•ä¸­çš„æ•°æ®ä¿¡æ¯è¯†åˆ«ç­‰ã€‚
+ **å›¾åƒæ ‡æ³¨å’Œç†è§£**ï¼šç»“åˆæ–‡æœ¬è¾“å…¥ï¼Œæ ¹æ®ç‰¹å®šä½ç½®æˆ–å†…å®¹è¦æ±‚å¯¹å›¾åƒè¿›è¡Œè¯¦ç»†åˆ†æã€‚

è¿™ç§æ–¹æ³•å¯ä»¥åº”ç”¨åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œå¦‚OCRï¼ˆå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼‰ã€å›¾åƒå®¡æ ¸ã€åˆè§„æ€§æ£€æŸ¥ç­‰ã€‚

<Card title="PIG AIåº”ç”¨å¼€å‘å¹³å° | é€‚åˆä¸­å¤§å‹ä¼ä¸šæ„å»ºè‡ªä¸»å¯æ§çš„AIä¸­å°" icon="link" href="https://ai.pig4cloud.com">
**ä¸ºJavaå¼€å‘è€…æä¾›å…¨æ ˆå¼AIå·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆ**ï¼Œå¼ºç±»å‹/é«˜å¯ç»´æŠ¤æ€§æ¶æ„ï¼Œå†…ç½®30+ä¸»æµå¤§æ¨¡å‹æ”¯æŒã€‚

- **ğŸ” çŸ¥è¯†å¼•æ“ä½“ç³»**ï¼šRAG çŸ¥è¯†å¼•æ“å…¨è‡ªåŠ¨åŒ–å¤šæ¨¡æ€è§£å†³æ–¹æ¡ˆ
- **ğŸ“ AI-OCR ä¸­æ¢**ï¼šå¤æ‚éæ ‡åœºæ™¯é«˜ç²¾åº¦è¯†åˆ«
- **âš™ï¸ ä¸šåŠ¡æ™ºèƒ½èåˆ**ï¼šå‡½æ•°ç¼–æ’ + Chat2SQLï¼Œæ— ç¼å¯¹æ¥ç°æœ‰ä¸šåŠ¡ç³»ç»Ÿ
- **ğŸ›¡ï¸ Nç»´é£æ§ä½“ç³»**ï¼šæ•æ„Ÿè¯/IP/Token/User è§„åˆ™æ§åˆ¶å¼•æ“
</Card>

<Card title="æ–‡æ¡£æœ‰è¯¯ï¼Ÿè¯·ååŠ©ç¼–è¾‘" icon="pencil" href="https://github.com/javaai-pig4cloud-com/javaai-docs/edit/main/docs/06Chat è§†è§‰ç†è§£.mdx">
  å‘ç°æ–‡æ¡£é—®é¢˜ï¼Ÿç‚¹å‡»æ­¤å¤„ç›´æ¥åœ¨ GitHub ä¸Šç¼–è¾‘å¹¶æäº¤ PRï¼Œå¸®åŠ©æˆ‘ä»¬æ”¹è¿›æ–‡æ¡£ï¼
</Card>

